@page "/InGame"

@using Seoul.It.Blackjack.Client
@using Seoul.It.Blackjack.Core.Contracts
@inject BlackjackClient Client
@inject NavigationManager NavigationManager


<h1>BlackJack Table</h1> <br>


<button @onclick="Exit">나가기</button>
<button @onclick="OnInitialized">히트</button>
<button @onclick="Stand">스탠드</button>


@code {
	[SupplyParameterFromQuery(Name ="name")]
	public string UserName { get; set; }

	[SupplyParameterFromQuery(Name = "key")]
	public string DealerKey { get; set; }
	[Parameter]
	public GameState State { get; set; }

	
	public void Exit()
	{
		NavigationManager.NavigateTo("/");
	}

	protected override async  Task OnInitializedAsync()
	{
		Client.StateChanged += OnStateChanged;
		await Client.ConnectAsync("http://10.46.41.84:5000/blackjack");
		await Client.JoinAsync(UserName,DealerKey);
	}

	void OnStateChanged(GameState state)
	{
		State = state;
	}

	public void Stand()
	{
		NavigationManager.NavigateTo("/");
	}
	
		


}
